Week 2: Spring Data JPA + Tools

# Product Catalog Service

This repository contains the **Week 2** implementation of the Product Catalog API within the PharmaInventory system. It demonstrates advanced Spring Data JPA usage, real-database setup, build tooling, and developer experience features.

---

## Table of Contents

1. [Features](#features)
2. [Tech Stack](#tech-stack)
3. [Prerequisites](#prerequisites)
4. [Getting Started](#getting-started)

   * [Clone the Repository](#clone-the-repository)
   * [Configure the Database](#configure-the-database)
   * [Run in Development Mode](#run-in-development-mode)
   * [Build & Package](#build--package)
5. [Project Structure](#project-structure)
6. [API Endpoints](#api-endpoints)
7. [Profiles & Configuration](#profiles--configuration)
8. [Testing](#testing)
9. [Next Steps](#next-steps)

---

## Features

* CRUD operations for **Products** and **Categories**
* Advanced JPA mappings:

  * `@ManyToOne` (Product → Category)
  * `@ManyToMany` (Product ↔ Tag)
* Custom repository queries with pagination, filtering, and counts
* Profile-specific configuration (`dev` / `prod`)
* Hot reload with **Spring Boot DevTools**
* Build and packaging with **Maven** and **Gradle** (layered JARs)
* Global exception handling for consistent error responses

---

## Tech Stack

* **Java 17**
* **Spring Boot 3.1.4**
* **Spring Data JPA**
* **PostgreSQL**
* **Maven** & **Gradle**
* **Jakarta Bean Validation**

---

## Prerequisites

* Java 17 JDK
* Maven 3.6+ or Gradle 7+
* PostgreSQL (v12+)

---

## Getting Started

### Clone the Repository

```bash
git clone https://github.com/<your-username>/pharmainventory-catalog.git
cd pharmainventory-catalog
```

### Configure the Database

1. Create a PostgreSQL database and user:

   ```sql
   CREATE DATABASE catalog;
   CREATE USER catalog_user WITH PASSWORD 'secret';
   GRANT ALL PRIVILEGES ON DATABASE catalog TO catalog_user;
   ```
2. Update `src/main/resources/application-dev.yml` if you used different credentials or host.

### Run in Development Mode

The **dev** profile connects to PostgreSQL locally and enables hot reload:

**Maven**:

```bash
mvn spring-boot:run -Dspring-boot.run.profiles=dev
```

**Gradle**:

```bash
./gradlew bootRun --args='--spring.profiles.active=dev'
```

### Build & Package

This generates a layered JAR suitable for containerization:

**Maven**:

```bash
mvn clean package
```

**Gradle**:

```bash
./gradlew clean bootJar
```

The output JAR is in `target/` (Maven) or `build/libs/` (Gradle).

---

## Project Structure

```
pharmainventory-catalog/
├── pom.xml                # Maven build file
├── build.gradle           # Gradle build file
├── src
│   ├── main
│   │   ├── java
│   │   │   └── com.pharmainventory.catalog
│   │   │       ├── ProductCatalogApplication.java
│   │   │       ├── config      # DevTools configuration
│   │   │       ├── exception   # Global exception handlers
│   │   │       ├── model       # Entities: Product, Category, Tag
│   │   │       ├── repository  # Spring Data JPA repos
│   │   │       ├── service     # Business logic services
│   │   │       └── api         # REST controllers
│   │   └── resources
│   │       ├── application.yml
│   │       ├── application-dev.yml
│   │       └── application-prod.yml
│   └── test                 # Unit & integration tests (to be added)
└── README.md                # This file
```

---

## API Endpoints

### Categories

* `GET /api/categories` — list all categories
* `POST /api/categories` — create a new category

### Products

* `GET /api/products` — paginated list of products

  * Query params: `page`, `size`
* `GET /api/products/{id}` — get product by ID
* `GET /api/products/search?q={term}&page={p}&size={s}` — search by name
* `GET /api/products/price?min={min}&max={max}` — filter by price range
* `POST /api/products` — create a new product
* `PUT /api/products/{id}` — update existing product
* `DELETE /api/products/{id}` — delete product

---

## Profiles & Configuration

* **application.yml** — common settings
* **application-dev.yml** — `dev` profile (local Postgres, DevTools)
* **application-prod.yml** — `prod` profile (external DB, validate schema)

Activate a profile via:

```bash
--spring.profiles.active=dev
```

---

## Testing

> *Coming soon*: add unit and integration tests under `src/test/java`.

---

## Next Steps

* Write comprehensive tests for repositories and controllers
* Dockerize the application and PostgreSQL for easy setup
* Add Swagger/OpenAPI for API documentation
* Implement authentication and authorization

---

*Generated by your Week 2 implementation.*
